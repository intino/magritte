dsl Teseo

Service (title = "Interface for recovering all dashboard information", path = "/dashboard") rest as REST
	Resource(title="List of categorizations", path = "/categorizations", type = Get) categorizations
		Response as Object(schema = CategorizationCatalogResponseSchema)

	Resource(title="Opinions summary", path = "/summary", type = Get) summary
		Response as Object(schema = SummaryResponseSchema)

	Resource(title="Summary of opinions at some instant", path = "/snapshot", type = Get)snapshot
		Parameter(in = query) scale as Text
		Parameter(in = body) range as Object(schema = RangeSchema)
		Parameter(in = body) filters as Object(schema = FilterListSchema)
		Response as Object(schema = OpinionSnapshotResponseSchema)

Schema RangeSchema
	Attribute from as DateTime
	Attribute to as DateTime

Schema FilterListSchema
	Attribute(multiple=true) filters as Text

Schema CategorizationCatalogResponseSchema
	Member categorization
		Attribute name as Text
		Attribute label as Text
		Member category
			Attribute name as Text
			Attribute label as Text

Schema SummaryResponseSchema
	Member(multiple=false) today
		Member(multiple=false) count
			Attribute total as Integer

	Member(multiple=false) total
		Member(multiple=false) count
			Attribute total as Integer
			Attribute satisfied as Integer
			Attribute notVerySatisfied as Integer
			Attribute dissatisfied as Integer

		Member(multiple=false) difference
			Attribute satisfied as Real
			Attribute notVerySatisfied as Real
			Attribute dissatisfied as Real

Schema OpinionSnapshotResponseSchema
	Attribute instant as DateTime
	Attribute scale as Text
	Member(multiple=false) count
		Attribute total as Integer
		Attribute satisfied as Integer
		Attribute notVerySatisfied as Integer
		Attribute dissatisfied as Integer
	Member(multiple=false) difference
		Attribute satisfied as Real
		Attribute notVerySatisfied as Real
		Attribute dissatisfied as Real

	Member(multiple=false) timeLine
		Member point
			Attribute instant as DateTime
			Attribute value as Real