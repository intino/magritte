dsl Pandora

Service (title = "Interface for recovering all dashboard information", path = "/dashboard") rest as REST
	Resource(title="List of categorizations", path = "/categorizations", type = Get) categorizations
		Response as Object(format = CategorizationCatalogResponseFormat)

	Resource(title="Opinions summary", path = "/summary", type = Get) summary
		Response as Object(format = SummaryResponseFormat)

	Resource(title="Summary of opinions at some instant", path = "/snapshot", type = Get)snapshot
		Parameter(in = query) scale as Text
		Parameter(in = body) range as Object(format = RangeFormat)
		Parameter(in = body) filters as Object(format = FilterListFormat)
		Response as Object(format = OpinionSnapshotResponseFormat)

Format RangeFormat
	Attribute from as DateTime
	Attribute to as DateTime

Format FilterListFormat
	Attribute(multiple=true) filters as Text

Format CategorizationCatalogResponseFormat
	Attribute name as Text
	Attribute label as Text
	Format category
		Attribute name as Text
		Attribute label as Text

Format SummaryResponseFormat
	Format(multiple=false) today
		Format(multiple=false) count
			Attribute total as Integer

	Format(multiple=false) total
		Format(multiple=false) count
			Attribute total as Integer
			Attribute satisfied as Integer
			Attribute notVerySatisfied as Integer
			Attribute dissatisfied as Integer

		Format(multiple=false) difference
			Attribute satisfied as Real
			Attribute notVerySatisfied as Real
			Attribute dissatisfied as Real

Format OpinionSnapshotResponseFormat
	Attribute instant as DateTime
	Attribute scale as Text
	Format(multiple=false) count
		Attribute total as Integer
		Attribute satisfied as Integer
		Attribute notVerySatisfied as Integer
		Attribute dissatisfied as Integer
	Format(multiple=false) difference
		Attribute satisfied as Real
		Attribute notVerySatisfied as Real
		Attribute dissatisfied as Real

	Format(multiple=false) timeLine
		Format point
			Attribute instant as DateTime
			Attribute value as Real