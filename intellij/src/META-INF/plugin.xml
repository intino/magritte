<idea-plugin version="1">
  <id>siani.dev.tara</id>
  <name>Tara</name>
  <version>
    DP-1.0
  </version>
  <vendor email="octavioroncal@siani.es" url="http://www.siani.org">Siani</vendor>

  <description>
    <![CDATA[
      Siani development tool for the generation of model-based plugins
      ]]>
  </description>

  <change-notes><![CDATA[ First Realease. Windows integration. ]]>
  </change-notes>

  <idea-version since-build="133.375"/>

  <!-- please see http://confluence.jetbrains.net/display/IDEADEV/Plugin+Compatibility+with+IntelliJ+Platform+Products
       on how to target different products -->
  <!-- uncomment to enable plugin in all products
  <depends>com.intellij.modules.lang</depends> -->

  <actions>
    <action id="NewConcept" class="siani.tara.intellij.actions.CreateTaraFileAction">
      <add-to-group group-id="NewGroup" anchor="first"/>
    </action>
    <action id="NewPackage" class="siani.tara.intellij.actions.CreatePackageAction" text="Package"
            description="Create a new package" icon="AllIcons.Nodes.Package">
    </action>
    <group id="tara.import.group" popup="false">
      <action id="ImportModel" class="siani.tara.intellij.actions.ImportModelAction" text="Import Model"
              description="Import model">
        <keyboard-shortcut keymap="$default" first-keystroke="control shift I"/>
      </action>
      <add-to-group group-id="ToolsMenu" anchor="before" relative-to-action="com.intellij.tools.ExternalToolsGroup"/>
    </group>
    <group id="tara.export.group" popup="false">
      <action id="ExportModel" class="siani.tara.intellij.actions.ExportModelAction" text="Export Model"
              description="Export the compiled model with dependencies">
        <keyboard-shortcut keymap="$default" first-keystroke="control shift E"/>
      </action>
      <add-to-group group-id="ProjectViewPopupMenu" anchor="after" relative-to-action="Compile"/>
      <add-to-group group-id="BuildMenu" anchor="after" relative-to-action="BuildJar"/>
      <add-to-group group-id="EditorPopupMenu" anchor="last"/>
    </group>
    <group id="tara.file.group" popup="false">
      <action id="grammar.Generate" class="siani.tara.intellij.actions.GenerateAction" text="Generate Intentions Code">
        <keyboard-shortcut keymap="$default" first-keystroke="control shift G"/>
      </action>
      <add-to-group group-id="ToolsMenu" anchor="before" relative-to-action="com.intellij.tools.ExternalToolsGroup"/>
      <add-to-group group-id="EditorPopupMenu" anchor="last"/>
      <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
    </group>

    <group id="Internal.Tara" text="Tara" popup="true" internal="true">
      <action id="ExcludeFromCodeGeneration"
              class="siani.tara.intellij.compiler.ExcludeFromStubGenerationAction"
              text="Exclude from stub generation"
              description="Don't generate Java stubs for this Tara file on compilation">
        <add-to-group group-id="EditorTabPopupMenu" anchor="first"/>
      </action>
      <add-to-group group-id="Internal"/>
    </group>
  </actions>

  <extensions defaultExtensionNs="com.intellij">
    <fileDocumentManagerListener implementation="siani.tara.intellij.codegeneration.TaraFileDocumentManagerListener"/>
    <errorHandler implementation="siani.tara.intellij.diagnostic.errorreporting.PluginErrorReportSubmitter"/>
    <lang.namesValidator language="Tara"
                         implementationClass="siani.tara.intellij.refactoring.rename.NamesValidator"/>
    <projectService serviceInterface="siani.tara.intellij.lang.psi.TaraElementFactory"
                    serviceImplementation="siani.tara.intellij.lang.psi.impl.TaraElementFactoryImpl"/>
    <sdkType implementation="siani.tara.intellij.project.sdk.TaraJdk"/>
    <moduleType id="TARA_MODULE" implementationClass="siani.tara.intellij.project.module.TaraModuleType"/>
    <treeStructureProvider implementation="siani.tara.intellij.project.view.MergerTreeStructureProvider"/>
    <fileTemplateGroup implementation="siani.tara.intellij.actions.TaraTemplatesFactory"/>
    <codeInsight.lineMarkerProvider language="Tara"
                                    implementationClass="siani.tara.intellij.codeinsight.linemarkers.TaraIntentionLineMarkerProvider"/>
    <codeInsight.lineMarkerProvider language="Tara"
                                    implementationClass="siani.tara.intellij.codeinsight.linemarkers.TaraFacetLineMarkerProvider"/>
    <codeInsight.lineMarkerProvider language="JAVA" implementationClass="siani.tara.intellij.codeinsight.linemarkers.JavaToTaraLineMarkerProvider"/>
    <gotoRelatedProvider implementation="siani.tara.intellij.codeinsight.TaraRelatedFilesProvider"/>
    <compileServer.plugin classpath="tara-jps-plugin.jar"/>
    <projectConfigurable instance="siani.tara.intellij.compiler.TaraCompilerConfigurable" id="Tara compiler"
                         displayName="Tara Compiler" parentId="project.propCompiler"/>
    <projectService serviceInterface="siani.tara.intellij.compiler.TaraCompilerWorkspaceConfiguration"
                    serviceImplementation="siani.tara.intellij.compiler.TaraCompilerWorkspaceConfiguration"/>
    <projectService serviceInterface="siani.tara.intellij.compiler.TaraCompilerConfiguration"
                    serviceImplementation="siani.tara.intellij.compiler.TaraCompilerConfiguration"/>

    <configurationType implementation="siani.tara.intellij.project.runner.RunConfigurationType"/>
    <lang.commenter language="Tara" implementationClass="siani.tara.intellij.TaraCommenter"/>
    <lang.documentationProvider language="Tara"
                                implementationClass="siani.tara.intellij.documentation.TaraDocumentationProvider"/>
    <fileTypeFactory implementation="siani.tara.intellij.lang.file.TaraFileTypeFactory"/>
    <lang.parserDefinition language="Tara"
                           implementationClass="siani.tara.intellij.lang.parser.TaraParserDefinition"/>
    <lang.syntaxHighlighterFactory key="Tara"
                                   implementationClass="siani.tara.intellij.highlighting.TaraSyntaxHighlighterFactory"/>
    <colorSettingsPage implementation="siani.tara.intellij.highlighting.TaraColorSettingPage"/>
    <lang.braceMatcher language="Tara" implementationClass="siani.tara.intellij.highlighting.TaraBraceMatcher"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.ReferenceAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.AnnotationsAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.AttributeAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.ConceptAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.BoxReferenceAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.ParameterAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.ParametersAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.FacetApplyAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.FacetApplyParametersAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.ConceptTypeAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.PropertiesAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.ModelAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.FacetAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.ConceptReferenceAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.FacetTargetAnnotator"/>
    <annotator language="Tara" implementationClass="siani.tara.intellij.annotator.imports.ImportMetamodelAnnotation"/>
    <completion.contributor language="Tara"
                            implementationClass="siani.tara.intellij.codeinsight.completion.TaraConceptCompletionContributor"/>
    <completion.contributor language="Tara"
                            implementationClass="siani.tara.intellij.codeinsight.completion.TaraPrimitivesCompletionContributor"/>
    <completion.contributor language="Tara"
                            implementationClass="siani.tara.intellij.codeinsight.completion.TaraAnnotationsCompletionContributor"/>
    <lang.psiStructureViewFactory language="Tara"
                                  implementationClass="siani.tara.intellij.structureview.StructureViewFactory"/>
    <!--<psi.referenceContributor implementation="siani.tara.intellij.lang.psi.resolve.TaraReferenceContributor"/>-->
    <nameSuggestionProvider implementation="siani.tara.intellij.refactoring.NameSuggestionProvider"/>
    <lang.elementManipulator forClass="siani.tara.intellij.lang.psi.TaraIdentifier"
                             implementationClass="siani.tara.intellij.lang.psi.impl.IdentifierManipulator"/>
    <codeInsight.parameterInfo language="Tara"
                               implementationClass="siani.tara.intellij.codeinsight.parameterinfo.TaraParameterInfoHandler"/>

    <lang.refactoringSupport language="Tara"
                             implementationClass="siani.tara.intellij.TaraRefactoringSupportProvider"/>
    <renameHandler implementation="siani.tara.intellij.refactoring.rename.RenameHandler"/>
    <lang.findUsagesProvider language="Tara"
                             implementationClass="siani.tara.intellij.lang.psi.resolve.TaraFindUsagesProvider"/>
    <lang.foldingBuilder language="Tara" implementationClass="siani.tara.intellij.TaraFoldingBuilder"/>
    <projectService serviceInterface="siani.tara.intellij.codeinsight.JavaHelper"
                    serviceImplementation="siani.tara.intellij.codeinsight.JavaHelper$Impl"/>
    <!--<facetType implementation="siani.tara.intellij.project.facet.MagritteFacetType"/>-->
    <!--<referenceImporter implementation="siani.tara.intellij.annotator.imports.TaraReferenceImporter"/>-->
    <!--<lang.formatter language="Tara" implementationClass="siani.tara.intellij.formatter.TaraFormattingModelBuilder"/>-->
    <moveFileHandler implementation="siani.tara.intellij.refactoring.move.TaraFileMoveHandler"/>
    <refactoring.moveHandler implementation="siani.tara.intellij.refactoring.move.TaraMoveConcept"/>
    <lang.importOptimizer language="Tara"
                          implementationClass="siani.tara.intellij.codeinsight.imports.TaraImportOptimizer"/>
    <findUsagesHandlerFactory implementation="siani.tara.intellij.findusage.TaraFindUsagesHandlerFactory" id="Tara"
                              order="last, before default"/>

  </extensions>

  <application-components>
  </application-components>

  <module-components>
    <component>
      <implementation-class>siani.tara.intellij.project.module.ModuleConfiguration</implementation-class>
    </component>
  </module-components>

  <project-components>
    <component>
      <implementation-class>siani.tara.intellij.project.module.TaraModuleListener</implementation-class>
    </component>
  </project-components>
</idea-plugin>